<!DOCTYPE html>
<html lang="vi">
<head>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√≥n Qu√† 19-11 T·ª´ Em ‚ù§Ô∏è</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            pointer-events: none;
            z-index: 1;
        }
        .container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: clamp(20px, 5vw, 40px);
            text-align: center;
            position: relative;
            z-index: 2;
        }
        .page { display: none; animation: fadeIn 0.8s ease-out; width: 100%; }
        .page.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        h1 {
            font-size: clamp(1.8rem, 5vw, 2.8rem);
            color: #d63384;
            margin-bottom: clamp(20px, 8vw, 40px);
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* === PAGE 1 === */
        .input-group { display: flex; flex-direction: column; gap: 15px; max-width: 320px; width: 100%; }
        input {
            padding: 16px;
            border: 3px solid #ff69b4;
            border-radius: 30px;
            font-size: 1.1rem;
            text-align: center;
            background: rgba(255,255,255,0.95);
        }
        input:focus { outline: none; border-color: #d63384; transform: scale(1.03); }

        /* === PAGE 2 === */
        .envelope-img { width: clamp(160px, 35vw, 220px); filter: drop-shadow(0 10px 20px rgba(0,0,0,0.25)); }
        .box { font-size: clamp(5rem, 22vw, 9rem); animation: bounce 2s infinite; }
        @keyframes bounce { 0%,100% { transform: translateY(0); 50% { transform: translateY(-15px); } }

        /* === PAGE 4 - KHUNG TH∆Ø HO√ÄN H·∫¢O === */
        .magic-envelope {
            width: 90vw;
            max-width: 430px;
            height: auto !important;           /* T·ª± ƒë·ªông gi√£n */
            min-height: 280px;
            position: relative;
            margin: 40px auto;
            cursor: pointer;
        }
        .envelope-body {
            width: 100%;
            height: 100%;
            background: white;
            border: 4px solid #ff69b4;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(214, 51, 132, 0.3);
        }
        .letter-content {
            padding: 40px 30px;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.9s ease;
        }
        .magic-envelope.open .letter-content {
            opacity: 1;
            transform: translateY(0);
        }
        .typing-text {
            font-size: clamp(1.3rem, 4.5vw, 1.7rem) !important;
            line-height: 2;
            color: #d63384;
            text-align: center;
            white-space: pre-line;   /* Quan tr·ªçng: nh·∫≠n \n th√†nh xu·ªëng d√≤ng */
            word-break: keep-all;
        }
        .cursor { display: inline-block; background: #d63384; width: 3px; animation: blink 1s infinite; }
        @keyframes blink { 0%,50% { opacity: 1; } 51%,100% { opacity: 0; } }

        /* G·∫•u v√† n√∫t */
        .bears-container { gap: 40px; margin: 40px auto 20px; }
        .bear { font-size: clamp(50px, 12vw, 70px); animation: bearBounce 2.5s infinite; }
        @keyframes bearBounce { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-12px); } }
        .restart {
            padding: 14px 40px;
            font-size: 1.1rem;
            background: linear-gradient(45deg, #ff9a9e, #fecfef);
            border: 3px solid #d63384;
            border-radius: 50px;
            color: #d63384;
            font-weight: bold;
        }

        /* C√°c hi·ªáu ·ª©ng kh√°c gi·ªØ nguy√™n */
        .close-btn {
            position: fixed !important; top: 15px !important; right: 15px !important;
            width: 44px; height: 44px; border-radius: 50%; background: #ff69b4 !important;
            color: white !important; border: 3px solid white !important; font-size: 20px;
            z-index: 9999;
        }
    </style>
</head>
<body>

    <!-- Nh·∫°c ch·∫°y ngay c·∫£ tr√™n ƒëi·ªán tho·∫°i -->
    <audio id="bgMusic" loop autoplay playsinline preload="auto">
        <source src="123.mp3" type="audio/mpeg">
    </audio>

    <!-- PAGE 1 -->
    <div id="page1" class="page active">
        <div class="container">
            <h1>C√≥ m√≥n qu√† ƒë·∫∑c bi·ªát d√†nh ri√™ng cho anh n√® ‚ù§Ô∏è</h1>
            <div class="input-group">
                <input type="password" id="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u c·ªßa em ƒëi anh ∆°i üíï" maxlength="10">
                <button onclick="checkPassword()">M·ªü qu√† n√†o ‚ú®</button>
            </div>
            <p id="error" class="error hidden"> Sai m·∫≠t kh·∫©u r·ªìi, th·ª≠ l·∫°i nha anh y√™u üòò</p>
        </div>
    </div>

    <!-- PAGE 2, 3 gi·ªØ nguy√™n (b·∫°n ƒë√£ c√≥ r·ªìi, m√¨nh kh√¥ng vi·∫øt l·∫°i cho g·ªçn) -->
    <!-- ... (gi·ªØ nguy√™n ph·∫ßn page2, page3, page4 HTML nh∆∞ c≈© c·ªßa b·∫°n) ... -->

    <!-- PAGE 4 - THI·ªÜP CH√çNH -->
    <div id="page4" class="page">
        <button class="close-btn" onclick="goBack()">‚úï</button>
        <div class="container">
            <div class="magic-envelope envelope" id="magicEnvelope">
                <div class="envelope-body">
                    <div class="letter-content" id="letterContent">
                        <p class="typing-text" id="typingText"></p>
                    </div>
                </div>
            </div>

            <div class="bears-container">
                <div class="bear bear-left" id="bearLeft">üêª</div>
                <div class="bear bear-right" id="bearRight">üêª</div>
            </div>

            <button class="restart" onclick="restart()">üíï Xem l·∫°i n√†o anh y√™u üíï</button>
        </div>
    </div>

    <script>
        const CORRECT_PASSWORD = "doanxem";
        let noClickCount = 0;

        const messages = `Ch√∫c m·ª´ng ng√†y 19-11 c·ªßa anh y√™u nha ‚ù§Ô∏è

C·∫£m ∆°n v√¨ anh lu√¥n m·∫°nh m·∫Ω, ·∫•m √°p v√† l√† ch·ªó d·ª±a l·ªõn nh·∫•t c·ªßa em.

H√¥m nay v√† m·ªçi ng√†y sau n·ªØa, em ch·ªâ mong anh lu√¥n c∆∞·ªùi th·∫≠t t∆∞∆°i v√† h·∫°nh ph√∫c th·∫≠t nhi·ªÅu nh√©!

Em y√™u anh nh·∫•t tr√™n ƒë·ªùi lu√¥n √°aa~ üíïüêª`;

        // To√†n b·ªô script gi·ªØ nguy√™n nh∆∞ c≈© c·ªßa b·∫°n, ch·ªâ th√™m 1 d√≤ng nh·ªè ƒë·ªÉ nh·∫°c ch·∫Øc ch·∫Øn ch·∫°y tr√™n mobile
        function playMusic() {
            const music = document.getElementById('bgMusic');
            music.volume = 0.35;
            music.play().catch(() => {
                // N·∫øu b·ªã ch·∫∑n autoplay, b·∫≠t khi ng∆∞·ªùi d√πng t∆∞∆°ng t√°c l·∫ßn ƒë·∫ßu (nh·∫≠p m·∫≠t kh·∫©u)
                document.body.addEventListener('touchstart', () => music.play(), { once: true });
            });
        }

        // Gi·ªØ nguy√™n t·∫•t c·∫£ h√†m c√≤n l·∫°i: checkPassword, openGift, refuseLetter, openLetter, startTyping, typeWriter, v.v...
        // (copy nguy√™n ph·∫ßn <script> c≈© c·ªßa b·∫°n v√†o ƒë√¢y, ch·ªâ thay ph·∫ßn messages v√† playMusic nh∆∞ tr√™n)

        document.addEventListener('DOMContentLoaded', () => {
            playMusic();
            createFloatingHearts();
            document.getElementById('password')?.focus();
        });
    </script>
</body>
</html>
