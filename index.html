<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√≥n Qu√† ƒê·∫∑c Bi·ªát 19-11 ‚ù§Ô∏è</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }
        body::before {
            content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            pointer-events: none; z-index: 1;
        }
        .container { min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: clamp(20px, 5vw, 40px); text-align: center; position: relative; z-index: 2; }
        .page { display: none; animation: fadeIn 0.8s ease-out; width: 100%; }
        .page.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        h1 { font-size: clamp(1.8rem, 5.5vw, 2.8rem); color: #d63384; margin-bottom: 30px; text-shadow: 0 2px 4px rgba(0,0,0,0.1); }

        .input-group { gap: 18px; max-width: 340px; width: 100%; }
        input { padding: 18px; border: 3px solid #ff69b4; border-radius: 30px; font-size: 1.2rem; background: rgba(255,255,255,0.95); }
        input:focus { outline: none; border-color: #d63384; transform: scale(1.03); }
        button { padding: 16px 40px; border-radius: 30px; background: linear-gradient(45deg, #ff69b4, #d63384); color: white; font-weight: bold; cursor: pointer; }
        button:hover { transform: scale(1.05); box-shadow: 0 8px 20px rgba(214,51,132,0.4); }

        .envelope-img { width: clamp(160px, 35vw, 220px); filter: drop-shadow(0 12px 20px rgba(0,0,0,0.25)); }
        .box { font-size: clamp(5rem, 22vw, 9rem); animation: bounce 2s infinite; }
        @keyframes bounce { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-18px); } }

        /* === KHUNG TH∆Ø T·ª∞ ƒê·ªòNG V·ª™A KH√çT 100% === */
        .magic-envelope {
            width: 90vw;
            max-width: 440px;
            height: auto !important;
            min-height: 300px;
            position: relative;
            margin: 40px auto;
        }
        .envelope-body {
            width: 100%;
            height: 100%;
            background: white;
            border: 5px solid #ff69b4;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(214,51,132,0.35);
        }
        .letter-content {
            padding: 45px 35px;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform: translateY(25px);
            transition: all 1s ease;
        }
        .magic-envelope.open .letter-content { opacity: 1; transform: translateY(0); }

        .typing-text {
            font-size: clamp(1.35rem, 4.8vw, 1.8rem) !important;
            line-height: 2.1;
            color: #d63384;
            text-align: center;
            white-space: pre-line; /* Quan tr·ªçng nh·∫•t ƒë·ªÉ \n xu·ªëng d√≤ng */
            word-wrap: break-word;
        }
        .cursor { display: inline-block; background: #d63384; width: 3px; height: 1.4em; margin-left: 2px; animation: blink 1s infinite; vertical-align: middle; }
        @keyframes blink { 0%,50% { opacity: 1; } 51%,100% { opacity: 0; } }

        .bears-container { gap: 50px; margin: 50px auto 30px; }
        .bear { font-size: clamp(60px, 14vw, 80px); animation: bearBounce 2.3s infinite; cursor: pointer; }
        @keyframes bearBounce { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }

        .restart {
            padding: 16px 50px;
            font-size: 1.2rem;
            background: linear-gradient(45deg, #ff9a9e, #fecfef);
            border: 4px solid #d63384;
            border-radius: 50px;
            color: #d63384;
            font-weight: bold;
        }

        .close-btn {
            position: fixed !important; top: 15px !important; right: 15px !important;
            width: 48px; height: 48px; background: #ff69b4 !important; color: white !important;
            border: 3px solid white !important; border-radius: 50%; font-size: 22px; z-index: 9999;
        }
    </style>
</head>
<body>

    <!-- Nh·∫°c ch·∫°y ngay c·∫£ tr√™n ƒëi·ªán tho·∫°i -->
    <audio id="bgMusic" loop autoplay playsinline preload="auto">
        <source src="123.mp3" type="audio/mpeg">
    </audio>

    <!-- PAGE 1 -->
    <div id="page1" class="page active">
        <div class="container">
            <h1>C√≥ m√≥n qu√† ƒë·∫∑c bi·ªát d√†nh cho anh n√® ‚ù§Ô∏è</h1>
            <div class="input-group">
                <input type="password" id="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u c·ªßa em ƒëi anh ∆°i üíï" maxlength="10">
                <button onclick="checkPassword()">M·ªü qu√† n√†o ‚ú®</button>
            </div>
            <p id="error" class="error hidden">Sai m·∫≠t kh·∫©u r·ªìi ƒë√≥ anh ∆°i, th·ª≠ l·∫°i nha üòò</p>
        </div>
    </div>

    <!-- PAGE 2 -->
    <div id="page2" class="page">
        <button class="close-btn" onclick="goBack()">‚úï</button>
        <div class="container">
            <h1>Ch√∫c m·ª´ng ng√†y 19-11 c·ªßa anh y√™u! ‚ù§Ô∏è</h1>
            <div class="envelope-float">
                <img src="1234.png" alt="Phong b√¨" class="envelope-img">
            </div>
            <div class="gift-box" onclick="openGift()">
                <div class="box">üéÅ</div>
                <p>Nh·∫•n v√†o h·ªôp qu√† ƒë·ªÉ m·ªü nha anh!!</p>
            </div>
        </div>
    </div>

    <!-- PAGE 3 -->
    <div id="page3" class="page">
        <button class="close-btn" onclick="goBack()">‚úï</button>
        <div class="container">
            <div class="envelope"><div class="card">üíñ ƒê√¥i l·ªùi t·ª´ em üíñ</div></div>
            <div class="choices">
                <button class="btn-yes" onclick="openLetter()">C√≥, m·ªü lu√¥n ƒëi ‚ù§Ô∏è</button>
                <button class="btn-no" onclick="refuseLetter()">Kh√¥ng, ng·∫°i qu√° üò≥</button>
            </div>
        </div>
    </div>

    <!-- PAGE 4 - TH∆Ø T√åNH -->
    <div id="page4" class="page">
        <button class="close-btn" onclick="goBack()">‚úï</button>
        <div class="container">
            <div class="magic-envelope" id="magicEnvelope">
                <div class="envelope-body">
                    <div class="letter-content" id="letterContent">
                        <p class="typing-text" id="typingText"></p>
                    </div>
                </div>
            </div>

            <div class="bears-container">
                <div class="bear bear-left" id="bearLeft">üêª</div>
                <div class="bear bear-right" id="bearRight">üêª</div>
            </div>

            <button class="restart" onclick="restart()">üíï Xem l·∫°i n√†o anh y√™u üíï</button>
        </div>
    </div>

    <script>
        const CORRECT_PASSWORD = "doanxem";
        let noClickCount = 0;

        const messages = `Ch√∫c m·ª´ng ng√†y 19-11 c·ªßa anh y√™u nha ‚ù§Ô∏è

C·∫£m ∆°n v√¨ anh lu√¥n m·∫°nh m·∫Ω, ·∫•m √°p v√† l√† ch·ªó d·ª±a l·ªõn nh·∫•t c·ªßa em.

H√¥m nay v√† m·ªçi ng√†y sau n·ªØa, em ch·ªâ mong anh lu√¥n c∆∞·ªùi th·∫≠t t∆∞∆°i v√† h·∫°nh ph√∫c th·∫≠t nhi·ªÅu nh√©!

Em y√™u anh nh·∫•t tr√™n ƒë·ªùi lu√¥n √°aa~ üíïüêª`;

        function showPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function checkPassword() {
            if (document.getElementById('password').value === CORRECT_PASSWORD) {
                showPage('page2');
                document.getElementById('bgMusic').play();
            } else {
                document.getElementById('error').classList.remove('hidden');
                setTimeout(() => document.getElementById('error').classList.add('hidden'), 3000);
            }
        }

        function openGift() { showPage('page3'); }
        function refuseLetter() {
            noClickCount++;
            document.querySelector('.btn-no').style.transform = `scale(${Math.max(0.4, 1 - noClickCount*0.09)})`;
            if (noClickCount >= 7) openLetter();
        }
        function openLetter() {
            showPage('page4');
            setTimeout(() => document.getElementById('magicEnvelope').classList.add('open'), 600);
            setTimeout(startTyping, 1800);
        }
        function restart() { location.reload(); }

        function startTyping() {
            let i = 0;
            const txt = messages;
            const el = document.getElementById('typingText');
            const timer = setInterval(() => {
                el.innerHTML = txt.substring(0, i) + '<span class="cursor">|</span>';
                if (++i > txt.length) {
                    clearInterval(timer);
                    el.innerHTML = txt.replace(/\n/g, '<br>');
                    createFlowerParticles();
                }
            }, 80);
        }

        function createFlowerParticles() {
            for (let i = 0; i < 25; i++) {
                setTimeout(() => {
                    const p = document.createElement('div');
                    p.className = 'particle';
                    p.innerHTML = ['üå∏','üå∫','üíï','üå∑','‚ù§Ô∏è'][Math.floor(Math.random()*5)];
                    p.style.left = Math.random()*100 + 'vw';
                    p.style.animationDuration = (6 + Math.random()*8) + 's';
                    document.body.appendChild(p);
                    setTimeout(() => p.remove(), 16000);
                }, i*250);
            }
        }

        // B·∫≠t nh·∫°c khi ng∆∞·ªùi d√πng t∆∞∆°ng t√°c l·∫ßn ƒë·∫ßu (b·∫Øt bu·ªôc tr√™n mobile)
        document.body.addEventListener('touchstart', () => document.getElementById('bgMusic').play(), { once: true });
        document.getElementById('password').addEventListener('keypress', e => e.key === 'Enter' && checkPassword());
    </script>
</body>
</html>
